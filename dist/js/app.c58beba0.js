(function(){"use strict";var e={1525:function(e,a,n){var i=n(9242),o=n(3396);const t={class:"p-fluid grid formgrid"},c={class:"field col-12 md:col-4"},r=(0,o._)("label",{for:"basic"},"FECHA CREACIÓN: ",-1),l={class:"field col-12 md:col-4"},s={class:"scheduler-border"},d=(0,o._)("legend",{class:"scheduler-border"},"Contenedores",-1),p=(0,o._)("label",{class:"form-check-label",for:"checkboxMarron"},"Marron",-1),u=(0,o._)("label",{class:"form-check-label",for:"checkboxAzul"},"Azul",-1),h=(0,o._)("label",{class:"form-check-label",for:"checkboxAmarillo"},"Amarillo",-1),m=(0,o._)("label",{class:"form-check-label",for:"checkboxVerde"},"Verde-Gris",-1),f=(0,o._)("label",{class:"form-check-label",for:"checkboxTodo"},"Todo",-1),g={class:"field col-12 md:col-4"},v=(0,o._)("label",{for:"basic"},"POBLACIÓN: ",-1),b=(0,o._)("div",{id:"mapContainer"},null,-1);function k(e,a,n,k,C,w){const _=(0,o.up)("Calendar"),I=(0,o.up)("MultiSelect"),A=(0,o.up)("AccordionTab"),y=(0,o.up)("Accordion");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",null,[(0,o.Wm)(y,{activeIndex:0},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{header:"Filtros"},{default:(0,o.w5)((()=>[(0,o._)("div",t,[(0,o._)("div",c,[r,(0,o.Wm)(_,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),selectionMode:"range",showButtonBar:!0,onDateSelect:w.handleDate,onClearClick:w.clearDate},null,8,["modelValue","onDateSelect","onClearClick"])]),(0,o._)("div",l,[(0,o._)("fieldset",s,[d,(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"checkboxMarron",value:"marron","onUpdate:modelValue":a[1]||(a[1]=e=>C.checkedContenedores=e),onChange:a[2]||(a[2]=e=>w.pintarIncidencias())},null,544),[[i.e8,C.checkedContenedores]]),p,(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"checkboxAzul",value:"azul","onUpdate:modelValue":a[3]||(a[3]=e=>C.checkedContenedores=e),onChange:a[4]||(a[4]=e=>w.pintarIncidencias())},null,544),[[i.e8,C.checkedContenedores]]),u,(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"checkboxAmarillo",value:"amarillo","onUpdate:modelValue":a[5]||(a[5]=e=>C.checkedContenedores=e),onChange:a[6]||(a[6]=e=>w.pintarIncidencias())},null,544),[[i.e8,C.checkedContenedores]]),h,(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"checkboxVerde",value:"verde","onUpdate:modelValue":a[7]||(a[7]=e=>C.checkedContenedores=e),onChange:a[8]||(a[8]=e=>w.pintarIncidencias())},null,544),[[i.e8,C.checkedContenedores]]),m,(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"checkboxTodo",value:"todo","onUpdate:modelValue":a[9]||(a[9]=e=>C.checkedContenedores=e),onChange:a[10]||(a[10]=e=>w.pintarIncidencias())},null,544),[[i.e8,C.checkedContenedores]]),f])]),(0,o._)("div",g,[v,(0,o.Wm)(I,{modelValue:C.selectedCities2,"onUpdate:modelValue":a[11]||(a[11]=e=>C.selectedCities2=e),options:C.cities,optionLabel:"name",placeholder:"Seleccionar población",display:"chip",onChange:a[12]||(a[12]=e=>w.pintarIncidencias())},null,8,["modelValue","options"])])])])),_:1})])),_:1})]),b],64)}n(7658);var C=n(3153),w=n.n(C),_=n(7795),I=n(36);const A={apiKey:"AIzaSyCQr1gDn6X0-UKtT_A_5-vydt5YxV6_7e8",authDomain:"gestionrsu-f5648.firebaseapp.com",databaseURL:"https://gestionrsu-f5648-default-rtdb.firebaseio.com",projectId:"gestionrsu-f5648",storageBucket:"gestionrsu-f5648.appspot.com",messagingSenderId:"597299754002",appId:"1:597299754002:web:f57de4a040d2c3a57ed4cb"},y=(0,_.ZF)(A);(0,I.ad)(y);var x=n(7387),D=n.n(x),O=n(7130),S={name:"maps-app",mounted(){this.loadlocationIncidents(),D()("#mapContainer").on("click",".leaflet-popup-content .cycle a",(function(){var e,a=D()(".slideshow");return D()(this).hasClass("prev")?(e=a.find(".active").prev(),e.index()<0&&(e=D()(".image").last())):(e=a.find(".active").next(),e.index()<0&&(e=D()(".image").first())),a.find(".active").removeClass("active").hide(),e.addClass("active").show(),!1}))},components:{},data(){return{selectedState:"ENREVISION",selected:[],value:null,checkedContenedores:["verde"],dateRanger:null,markers:[],selectedCities2:[],cities:[],incidencias:[],webIncidencia:"http://appsdes.dip-badajoz.es/app.php/api/v2/incidencias/2/estadoweb?appToken=ASDFFDG-435657-RSUTY-456650&userToken=d24904f4ccc972aa6167c27089d95a3f942b9f514480de6d301f65b55a875ff6&idIncidencia=",optionsState:[{id:1,key:"ENREVISION",nombre:"En revisión"},{id:2,key:"APROBADA",nombre:"Aprobada"},{id:3,key:"CANCELADA",nombre:"Cancelada"}],options:[{text:"Orange",value:"orange"},{text:"Apple",value:"apple"},{text:"Pineapple",value:"pineapple"},{text:"Grape",value:"grape"}]}},computed:{},methods:{clearDate(){this.dateRanger=null,this.pintarIncidencias()},handleDate(){null!=this.value[0]&&null!=this.value[1]&&(this.dateRanger=this.value,this.pintarIncidencias())},padTo2Digits(e){return e.toString().padStart(2,"0")},formatDate(e){return[this.padTo2Digits(e.getDate()),this.padTo2Digits(e.getMonth()+1),e.getFullYear()].join("/")},pintarIncidencias(){let e=this;void 0!=e.map&&e.map.remove();var a=w().tileLayer.wms("http://www.ign.es/wms-inspire/pnoa-ma",{layers:"OI.OrthoimageCoverage",format:"image/png",transparent:!0,continuousWorld:!1});e.map=w().map("mapContainer",{layers:[a]}).setView([38.549306046136536,-6.240925714373589],9);var n=e.map.createPane("customPane");n.style.zIndex=399;const i=w().icon({iconUrl:"../images/camion_azul.png",iconSize:[38,38]}),o=w().icon({iconUrl:"../images/camion_amarillo.png",iconSize:[38,38]}),t=w().icon({iconUrl:"../images/camion_verde.png",iconSize:[38,38]}),c=w().icon({iconUrl:"../images/marker-red.png",iconSize:[38,38]}),r=w().icon({iconUrl:"../images/camion_rojo.png",iconSize:[38,38]});e.incidencias.forEach((function(a){var n=a.val();let l="http://appsdes.dip-badajoz.es/uploads/";var s="";if(e.selectedState===n.estado_incidencia.key&&0==e.selectedCities2.length||e.selectedCities2.filter((e=>e.name===n.poblacion)).length>0){let a=e.formatDate(new Date(n.fecha_envio));var d=`\n          <h4>INCIDENCIA NUM: ${n.id}</h4>\n          <div><b>CREADA: </b>${n.paciente.nombre} ${n.paciente.apellidos} (${n.correo_usuario})</div>\n          <div><b>FECHA: </b>${a}</div>\n          <div><b>TIPO DE INCIDENCIA: </b>${n.perfil.nombre}</div>`;if(null!=n.amarillo&&n.amarillo>0&&(d+=`<div><b>CONT AMARILLO: </b>${n.amarillo}</div>`),null!=n.verde&&n.verde>0&&(d+=`<div><b>CONT VERDE: </b>${n.verde}</div>`),null!=n.azul&&n.azul>0&&(d+=`<div><b>CONT AZUL: </b>${n.azul}</div>`),null!=n.marron&&n.marron>0&&(d+=`<div><b>CONT MARRON: </b>${n.marron}</div>`),null==e.dateRanger||2==e.dateRanger.length&&e.dateRanger[0]<new Date(n.fecha_envio)&&e.dateRanger[1]>new Date(n.fecha_envio)){if("ENREVISION"==n.estado_incidencia.key?d+='\n                <div>\n                  <a href="http://www.google.es" target="_blank"><img src="images/accept.png" /></a>\n                  <a href="http://www.google.es" target="_blank" class="right"><img src="images/delete.png" /></a>\n              </div>':"APROBADA"==n.estado_incidencia.key?d+='\n                <div>\n                  <a href="http://www.google.es" target="_blank"><img src="images/revision.png" /></a>\n                  <a href="http://www.google.es" target="_blank" class="right"><img src="images/delete.png" /></a>\n              </div>':d+='<div><a href="http://www.google.es" target="_blank" ><img src="images/revision.png" /></a><a href="http://www.google.es" target="_blank" class="right"> <img src="images/accept.png" /> </a></div>',null!=n.images){for(var p=0;p<n.images.length;p++){var u=n.images[p];s+='<div class="image'+(0===p?" active":"")+'"><img src="'+l+u+'" /></div>'}d+=`<div class="slideshow">\n                ${s}\n            </div>\n            <div class="cycle">\n                <a href="#" class="prev">&laquo; Previous</a>\n                <a href="#" class="next">Next &raquo;</a>\n            </div>`}e.checkedContenedores.forEach((a=>{if(n[a]>0){let c=w().marker([n.latitud,n.longitud],{icon:"verde"==a?t:"amarillo"==a?o:"azul"==a?i:r}).addTo(e.map).bindPopup(d);e.markers.push(c)}else if("todo"===a){let a=w().marker([n.latitud,n.longitud],{icon:c}).addTo(e.map).bindPopup(d);e.markers.push(a)}}))}}}),e)},loadlocationIncidents(){const e=(0,O.N8)(),a=(0,O.iH)(e,"/");(0,O.jM)(a,(e=>{if(e.exists()){this.incidencias=e;let a=[];e.forEach((e=>{void 0!=e.val().poblacion&&a.push(e.val().poblacion)})),a=[...new Set(a)],a.forEach((e=>{this.cities.push({name:e,code:e})})),console.log(a),this.pintarIncidencias()}else console.log("No data available")}))}},created(){}},E=n(89);const N=(0,E.Z)(S,[["render",k]]);var T=N,R=n(7729),V=n(9759),z=n(1652),U=n(1321),j=n(8387);const M=(0,i.ri)(T);M.component("Accordion",V.Z),M.component("AccordionTab",z.Z),M.component("MultiSelect",U.Z),M.component("Calendar",j.Z),M.use(R.Z).mount("#app")}},a={};function n(i){var o=a[i];if(void 0!==o)return o.exports;var t=a[i]={exports:{}};return e[i].call(t.exports,t,t.exports,n),t.exports}n.m=e,function(){var e=[];n.O=function(a,i,o,t){if(!i){var c=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],t=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&t||c>=t)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,t<c&&(c=t));if(r){e.splice(d--,1);var s=o();void 0!==s&&(a=s)}}return a}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[i,o,t]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var i in a)n.o(a,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={143:0};n.O.j=function(a){return 0===e[a]};var a=function(a,i){var o,t,c=i[0],r=i[1],l=i[2],s=0;if(c.some((function(a){return 0!==e[a]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var d=l(n)}for(a&&a(i);s<c.length;s++)t=c[s],n.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return n.O(d)},i=self["webpackChunkincidencias_rsu"]=self["webpackChunkincidencias_rsu"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(1525)}));i=n.O(i)})();
//# sourceMappingURL=app.c58beba0.js.map